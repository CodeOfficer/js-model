var Model=function(e,f){var d=function(a){this._name=e;this.attributes=a||{};this.changes={};this.errors=[];this.trigger("initialize")};d.prototype=$.extend({attr:function(a,b){if(arguments.length==2){if(_.isEqual(this.attributes[a],b))delete this.changes[a];else this.changes[a]=b;return this}else{var c=this.changes[a];return c==undefined?this.attributes[a]:c}},clearChanges:function(){this.changes={};return this},destroy:function(){this.trigger("destroy");return this},id:function(){return this.attributes.id||
null},newRecord:function(){return this.id()==null},save:function(){if(!this.valid())return false;this.attributes=$.extend(this.attributes,this.changes);this.clearChanges();this.trigger("save");return true},toParam:function(){var a={};for(var b in this.attributes){var c=this.attributes[b];if(b!="id"&&c!=null)a[this._name+"["+b+"]"]=c}return a},trigger:function(a){$().trigger([this._name,a].join(":"),[this]);return this},valid:function(){this.validate();return this.errors.length==0},validate:function(){this.errors=
[];return this}},f);return d};
