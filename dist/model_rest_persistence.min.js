Model.RestPersistence=function(g,h){var e=function(){this.resource=g};e.prototype=$.extend({create:function(a,c,b){return this.xhr("POST",this.create_path(a),a,function(d){this.update(d);c&&c.apply(this,arguments)},b)},create_path:function(){return this.resource},destroy:function(a,c,b){return this.xhr("DELETE",this.update_path(a),null,c,b)},update:function(a,c,b){return this.xhr("PUT",this.update_path(a),a,function(d){this.update(d);c&&c.apply(this,arguments)},b)},update_path:function(a){return[this.resource,
a.id()].join("/")},xhr:function(a,c,b,d,f){return $.ajax({type:a,url:c,dataType:"json",data:b?b.toParam():null,failure:function(){f&&f.apply(b,arguments)},success:function(){d&&d.apply(b,arguments)}})}},h);return new e};
